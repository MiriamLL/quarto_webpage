{
  "hash": "3ec492c098f697defda30a5e2532d63c",
  "result": {
    "markdown": "---\ntitle: \"larus\"\ndescription: |\n  An R package designed for working with GSM data. \nauthor:\n  - name: Miriam Lerma\ndate: 2025-03-07\nimage: larus_front.png\nformat:\n  html:\n    toc: true\n    toc-depth: 2\n    toc-location: left\n    css: styles.css\n---\n\n\n# Intro\n\nThis package offers tools for data manipulation, trip identification, and calculation of trip parameters like duration, maximum distance, and path length. Additionally, it supports trip interpolation.\n\nThere are three key issues in determining the foraging trips in **GSMs** attached to **gulls**:\n\n-   Battery charge and gaps (intervals) in the data.\n\n-   Central locations might change, so foraging trips can be difficult to identify.\n\n-   The gulls just do whatever they want.\n\n    For detailed instructions go to: [https://github.com/MiriamLL/](https://github.com/MiriamLL/spheniscus){.uri}larus\n\n## Install\n\nYou can install the development version of larus from GitHub with:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"devtools\")\ndevtools::install_github(\"MiriamLL/larus\")\n```\n:::\n\n\nLoad packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(larus)\n```\n:::\n\n\n# Battery checks\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(scales)\nlibrary(ggplot2)\n```\n:::\n\n\nPlot to see changes in battery charge over time.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(GSM_battery, aes(x=daytime, y=battery_charge)) +\n  geom_line() +\n  scale_x_datetime(labels = date_format(\"%b\"),date_breaks = \"1 month\")+\n  theme_bw()+\n  xlab('')\n```\n\n::: {.cell-output-display}\n![](larus_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n# Example of use\n\nSeparating by month makes it more easy to observe\n\n\n::: {.cell}\n\n```{.r .cell-code}\nThis_month<-'06'\nThis_month_text<-'Jun'\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nTrips_01locs<-GSM_locs %>%\n  filter(month==This_month)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnest_central_location<-data.frame(Longitude=-110.33979846296234,Latitude=24.28728834326802)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_check(my_locs=Trips_01locs,my_central_location=nest_central_location)\n```\n\n::: {.cell-output-display}\n![](larus_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nTrips_02outside<-Trips_01locs %>%\n  filter(inside=='outside_central')\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nPrevious_params<-data.frame(trip_id=c(\"trip_00001\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntrip_number_sequence<-continue_trip_sequence(my_previous=Previous_params$trip_id)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"trip_00001\"\n[1] 1\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nTrips_03trips<-Trips_02outside %>%\n  mutate(num_seq=as.numeric(num_seq))%>%\n  mutate(trip_number = (cumsum(c(1L, diff(num_seq)) !=   1L)))%>%\n  mutate(trip_number = trip_number +1 + trip_number_sequence)%>%\n  mutate(trip_number = stringr::str_pad(trip_number,  5, pad = \"0\"))%>%\n  mutate(trip_number = paste0(\"trip_\", trip_number))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_trips(my_locs=Trips_03trips,my_central_location=nest_central_location)\n```\n\n::: {.cell-output-display}\n![](larus_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n### Calculate parameters\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTrips_04params<-calculate_params(my_locs=Trips_03trips,\n                                 my_daytime='daytime',\n                                 my_format=  \"%Y-%m-%d %H:%M:%S\",\n                                 my_units=\"hours\",\n                                 my_divider=\"trip_number\",\n                                 my_gaps='gaps_min')\n```\n:::\n\n\nCheck if values are plausible\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrange(Trips_04params$duration)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1]  0.0000 14.4175\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhist(Trips_04params$duration)\n```\n\n::: {.cell-output-display}\n![](larus_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n-   However, central locations might change, so foraging trips can be difficult to identify, so go to the github page and follow the instructions on the reevaluate section.\n\n# Citation\n\nLerma, M. 2025. R package 'larus'. <https://github.com/MiriamLL/larus>\n",
    "supporting": [
      "larus_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}