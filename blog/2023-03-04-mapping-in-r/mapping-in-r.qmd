---
title: "Mapping in R"
description: |
  Create a map of Europe in ggplot2.
author:
  - name: Miriam Lerma
    url: {}
date: 2023-03-04
image: mapping_front.jpg
categories:
  - R
  - ggplot2
  - English
  - Y2023
  - GIS
format:
  html:
    toc: true
    toc-depth: 2
    toc-location: left
---


# Intro

How to create a map in ggplot and add attributes.

## Getting ready

You can download shapefiles from: https://www.naturalearthdata.com/downloads/

Call the package **here** to work in your directory.

```{r, eval=FALSE}
library(here)
```

Call the package **sf** to read the shapefiles into R

```{r, eval=FALSE}
library(sf)
```

## Read your shapefile

Use your directory name, and give the name of your shapefile

```{r, echo=FALSE, eval=FALSE}
Directory<-here('')
MyShapefileName<-"/country.shp"
```

```{r, eval=FALSE}
Europe<-st_read(paste0(Directory,MyShapefileName))
```

## Create a basic map

Load **ggplot2**

```{r, eval=FALSE}
library(ggplot2)
```

Plot your shapefile

```{r, eval=FALSE}
ggplot()+  
  geom_sf(data = Europe)
```

## Add colors

I copy the hex colors from [coolors](www.coolors.co)

```{r, eval=FALSE}
ggplot()+  
  geom_sf(data = Europe, 
          colour = "#edf2f4", 
          fill = "#2b2d42",
          size=0.5)
```

## Change background color

You can eliminate the grids and the change the background color in ggplot

```{r, eval=FALSE}
ggplot()+  
  geom_sf(data = Europe, 
          colour = "#edf2f4", 
          fill = "#2b2d42",
          size=0.5)+
  theme(
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        panel.background = element_rect(fill = '#edf2f4'),
        legend.background = element_rect(fill = '#edf2f4'))
```


## Add limits 

Reduce to focus in your area of interest

```{r, eval=FALSE}
ggplot()+  
  geom_sf(data = Europe, 
          colour = "#edf2f4", 
          fill = "#2b2d42",
          size=0.5)+
  theme(
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        panel.background = element_rect(fill = '#edf2f4'),
        legend.background = element_rect(fill = '#edf2f4'))+
  
  coord_sf(xlim = c(9, 31),ylim = c(53, 65))
```


## Add scale

Load the package **ggspatial** to add a scale and an north arrow

```{r, eval=FALSE}
library(ggspatial)
```

**br** is from bottom right  
**bar_cols** is for column colors  
**text_col** is for the color of the text  

```{r, eval=FALSE}
ggplot()+  
  geom_sf(data = Europe, 
          colour = "#edf2f4", 
          fill = "#2b2d42",
          size=0.5)+
  theme(
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        panel.background = element_rect(fill = '#edf2f4'),
        legend.background = element_rect(fill = '#edf2f4'))+
  
  coord_sf(xlim = c(9, 31),ylim = c(53, 65))+
    scale_x_continuous(labels = function(x) paste0(x, '\u00B0', "W")) +
    scale_y_continuous(labels = function(x) paste0(x, '\u00B0', "N")) +
  
  annotation_scale(location = "br",bar_cols = c("#ef233c", "#d90429"),text_col = '#ef233c')
```

## Add arrow

**tl** is for top left  
**which_north** preferably true (see why [here](https://github.com/paleolimbot/ggspatial/issues/15))  
**north_arrow_fancy_orienteering** (see other styles [here](https://github.com/paleolimbot/ggspatial/issues/15))  

```{r, eval=FALSE}
ggplot()+  
  geom_sf(data = Europe, 
          colour = "#edf2f4", 
          fill = "#2b2d42",
          size=0.5)+
  theme(
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        panel.background = element_rect(fill = '#edf2f4'),
        legend.background = element_rect(fill = '#edf2f4'))+
  
  coord_sf(xlim = c(9, 31),ylim = c(53, 65))+
    scale_x_continuous(labels = function(x) paste0(x, '\u00B0', "W")) +
    scale_y_continuous(labels = function(x) paste0(x, '\u00B0', "N")) +
  
   annotation_scale(location = "br",bar_cols = c("#ef233c", "#d90429"),text_col = '#ef233c')+
  
  annotation_north_arrow(location = "tl", style = north_arrow_minimal(text_col = '#ffd60a',line_col = '#ffd60a',fill = '#ffd60a')) 
```

```{r, echo=FALSE,  out.width="50%"}
Imagen1<-"https://github.com/MiriamLL/data_supporting_webpage/blob/main/Blog/2023/map_export.jpg?raw=true"
knitr::include_graphics(Imagen1)
```


Thats it for now!

